<app-header></app-header>
<div class="container" id="usersTable" *ngIf="hide; else addUserForm">
  <div class="container mt-5">
    <!--Iniciamos el contenedor de options-->
    <div class="row">
      <!-- Iniciamos la fila de las options-->

      <button
        (click)="addUser()"
        class="m-2 mt-5 mx-auto col-1 rounded border-2"
        [ariaDisabled]="true"
        title="New user"
      >
        <img
          src="../../../assets/imagenes/sistema/add_user.png"
          class="card-img-top"
          style="width: 75px; margin: 0 auto"
          alt="New user"
        />
      </button>
    </div>
    <!--Finalizamos la fila de las options-->
  </div>
  <!--Finalizamos el contenedor de las options-->
  <div class="container mt-2">
    <!--Iniciamos el contenedor de las tablas-->
    <div class="row">
      <!--Iniciamos la tabla de los Usuarios-->
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Opciones</th>
            <th scope="col">ID</th>
            <th scope="col">Nombre</th>
            <th scope="col">Rol</th>
            <th scope="col">Alias</th>
            <th scope="col">Email</th>
            <th scope="col">Imagen</th>
            <th scope="col">Activo</th>
          </tr>
        </thead>
        <tbody *ngIf="users.length >= 0; else sinUsuarios">
          <tr *ngFor="let user of users">
            <td>
              <!--<input type="checkbox" id="check_{{ user.id_user }}" /> -->
              <button
                (click)="editUser(user.userId)"
                class="m-1 rounded border-2"
                [ariaDisabled]="true"
                title="Edit user {{user.userName}}"
              >
                <img
                  src="../../../assets/imagenes/sistema/edit_user.png"
                  style="width: 15px; margin: 0 auto"
                  alt="Edit user"
                />
              </button>
              <button
                (click)="delUser(user.userId)"
                class="m-1 rounded border-2"
                [ariaDisabled]="true"
                title="Delete User"
                *ngIf="user.userId > 1"
              >
                <img
                  src="../../../assets/imagenes/sistema/delete_users.png"
                  style="width: 15px; margin: 0 auto"
                  alt="Delete user"
                />
              </button>
            </td>
            <td>{{ user.userId }}</td>
            <td>{{ user.userName }}</td>
            <td>{{ user.userRol }}</td>
            <td>{{ user.userAlias }}</td>
            <td>{{ user.userEmail }}</td>
            <td><img src="../../../assets/imagenes/usuarios/{{user.userImage}}" alt="Imagen del usuario" class="rounded"></td>
            <td>{{ user.userActive === "1" ? "Yes" : "No" }}</td>
          </tr>
        </tbody>
        <ng-template #sinUsuarios>
          <tbody>
            <p>No hay usuarios dados de alta a√∫n en el sistema.</p>
          </tbody>
        </ng-template>
      </table>
    </div>
    <!--Finalizamos la tabla de los Usuarios-->
  </div>
  <!--Finalizamos el contenedor de las options-->
</div>
<ng-template #addUserForm>
  <app-new-user [userId]="userEdit"></app-new-user>
</ng-template>
<app-back></app-back>
